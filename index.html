<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Pedras | Cat√°logo Premium Completo</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sage: '#F0F4F1',      
                        forest: '#2D4035',    
                        leaf: '#4ADE80',      
                        mint: '#D1FAE5',      
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #F0F4F1; color: #1A2E22; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass-light { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.4); }
        .product-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(45, 64, 53, 0.1); }
        .category-active { background-color: #2D4035 !important; color: white !important; }
        @keyframes success-pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); background-color: #4ADE80; }
            100% { transform: scale(1); }
        }
        .added-anim { animation: success-pop 0.4s ease; }
    </style>
</head>
<body class="no-scrollbar">

    <header class="p-10 flex flex-col items-center gap-6 text-center">
        <div>
            <div class="flex items-center justify-center gap-2 mb-2">
                <span class="w-2 h-2 rounded-full bg-leaf"></span>
                <span class="text-[10px] font-bold uppercase tracking-widest text-forest/60">Especialista em Pedras Naturais</span>
            </div>
            <h1 class="text-5xl font-extrabold text-forest tracking-tighter">Natural <span class="font-light">Pedras</span></h1>
        </div>
        <div class="relative w-full max-w-xl">
            <input type="text" id="mainSearch" placeholder="Pesquisar pedras..." 
                   class="w-full bg-white border-none rounded-2xl py-4 pl-12 shadow-sm focus:ring-2 ring-leaf outline-none transition-all">
            <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-forest/30"></i>
        </div>
    </header>

    <nav class="sticky top-0 z-30 px-6 py-4 glass-light shadow-sm overflow-x-auto no-scrollbar">
        <div class="max-w-7xl mx-auto flex justify-center gap-3 min-w-max md:min-w-0">
            <button onclick="filterCategory('all', this)" class="cat-btn category-active px-6 py-2 rounded-full bg-white text-forest text-sm font-bold transition-all whitespace-nowrap border border-transparent hover:border-forest/10">Todos</button>
            <button onclick="filterCategory('Pisos', this)" class="cat-btn px-6 py-2 rounded-full bg-white text-forest text-sm font-bold transition-all whitespace-nowrap border border-transparent hover:border-forest/10">Pisos S√£o Tom√©</button>
            <button onclick="filterCategory('Lajinhas', this)" class="cat-btn px-6 py-2 rounded-full bg-white text-forest text-sm font-bold transition-all whitespace-nowrap border border-transparent hover:border-forest/10">Lajinhas</button>
            <button onclick="filterCategory('Rockface', this)" class="cat-btn px-6 py-2 rounded-full bg-white text-forest text-sm font-bold transition-all whitespace-nowrap border border-transparent hover:border-forest/10">Rockface</button>
            <button onclick="filterCategory('Revestimentos', this)" class="cat-btn px-6 py-2 rounded-full bg-white text-forest text-sm font-bold transition-all whitespace-nowrap border border-transparent hover:border-forest/10">Filetes/Mosaicos</button>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" id="productGrid"></main>

    <div id="cartBar" class="fixed bottom-6 left-6 right-6 md:left-auto md:w-[400px] z-50 transform translate-y-32 opacity-0 transition-all duration-500">
        <div class="bg-forest text-white p-5 rounded-3xl shadow-2xl flex justify-between items-center cursor-pointer hover:bg-forest/95" onclick="openCheckout()">
            <div class="flex items-center gap-4">
                <div class="bg-leaf/20 p-2 rounded-xl text-leaf"><i class="fa-solid fa-cart-shopping"></i></div>
                <div>
                    <p id="cartCount" class="text-xs font-bold text-leaf uppercase tracking-tighter">0 itens</p>
                    <p id="cartTotalText" class="text-lg font-bold">R$ 0,00</p>
                </div>
            </div>
            <span class="bg-leaf text-forest px-4 py-2 rounded-xl font-black text-[10px] uppercase">Finalizar</span>
        </div>
    </div>

    <div id="productModal" class="fixed inset-0 z-[60] bg-forest/20 backdrop-blur-md hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-[2.5rem] shadow-2xl relative no-scrollbar">
            <div class="flex flex-col lg:flex-row">
                <div class="w-full lg:w-1/2 relative bg-mint h-80 lg:h-auto min-h-[400px]">
                    <div id="modalSlider" class="h-full w-full flex transition-transform duration-500"></div>
                </div>

                <div class="w-full lg:w-1/2 p-8 lg:p-12">
                    <button onclick="closeModal('productModal')" class="absolute top-6 right-6 text-forest/20 hover:text-forest transition-colors"><i class="fa-solid fa-xmark text-2xl"></i></button>
                    <h2 id="modalTitle" class="text-3xl font-extrabold text-forest mb-4 tracking-tighter"></h2>
                    <p id="modalPriceBase" class="text-2xl font-bold text-forest/40 mb-6"></p>
                    
                    <div class="mb-8">
                        <h3 class="text-[10px] font-black uppercase text-forest/40 mb-4 tracking-widest">Insumos Recomendados</h3>
                        <div id="extrasContainer" class="space-y-2"></div>
                    </div>
                    
                    <div class="flex flex-col gap-4">
                        <div class="flex items-center justify-between bg-sage p-2 rounded-2xl border border-forest/5">
                            <button onclick="updateQty(-0.5)" class="w-12 h-12 flex items-center justify-center text-forest font-bold text-xl">-</button>
                            <div class="text-center">
                                <input type="number" id="qtyInput" step="0.5" class="w-20 bg-transparent text-center font-black text-xl outline-none" value="1.0">
                                <span class="block text-[8px] font-bold uppercase opacity-30">Metros ($m^2$)</span>
                            </div>
                            <button onclick="updateQty(0.5)" class="w-12 h-12 flex items-center justify-center text-forest font-bold text-xl">+</button>
                        </div>
                        <button id="addToCartBtn" class="w-full bg-forest text-white h-16 rounded-2xl font-black text-sm tracking-widest uppercase shadow-lg transition-all active:scale-95">Adicionar Or√ßamento</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="checkoutModal" class="fixed inset-0 z-[70] bg-forest/40 backdrop-blur-sm hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-[2.5rem] p-8 shadow-2xl max-h-[90vh] overflow-y-auto no-scrollbar">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-black text-forest tracking-tighter italic">Finalizar Pedido</h2>
                <button onclick="closeModal('checkoutModal')" class="text-forest/20 hover:text-forest"><i class="fa-solid fa-xmark"></i></button>
            </div>

            <div id="checkoutItems" class="space-y-3 mb-8"></div>

            <div class="space-y-4 mb-8">
                <h3 class="text-[10px] font-black uppercase text-leaf tracking-widest">Dados de Entrega</h3>
                <div class="grid grid-cols-1 gap-3">
                    <input type="text" id="custName" placeholder="Nome Completo" class="w-full bg-sage rounded-xl px-5 py-4 text-sm outline-none focus:ring-2 ring-leaf/50">
                    <input type="tel" id="custPhone" placeholder="Telefone (WhatsApp)" class="w-full bg-sage rounded-xl px-5 py-4 text-sm outline-none focus:ring-2 ring-leaf/50">
                    <textarea id="custAddr" placeholder="Endere√ßo Completo de Entrega" rows="2" class="w-full bg-sage rounded-xl px-5 py-4 text-sm outline-none focus:ring-2 ring-leaf/50"></textarea>
                </div>
            </div>

            <div class="flex justify-between items-center mb-8 px-2 border-t border-forest/5 pt-6">
                <span class="text-forest/60 font-bold">Subtotal Material</span>
                <span id="finalTotalRes" class="text-3xl font-black text-forest"></span>
            </div>

            <button onclick="sendWhatsApp()" class="w-full bg-leaf py-5 rounded-2xl font-black text-forest flex items-center justify-center gap-3 shadow-lg hover:shadow-leaf/30 transition-all">
                <i class="fa-brands fa-whatsapp text-xl"></i> Enviar para Vendedor
            </button>
        </div>
    </div>

    <script>
        const CATALOG_ITEMS = [
            // PISOS S√ÉO TOM√â
            { id: 1, name: "Piso S√£o Tom√© Branco 37x18cm", category: "Pisos", price: 115.00, images: ["images/pisosaotome37x18.jpeg"] },
            { id: 2, name: "Piso S√£o Tom√© Branco 30x30cm", category: "Pisos", price: 110.00, images: ["images/pedramoledobranca.PNG"] },
            { id: 3, name: "Piso S√£o Tom√© Branco 47x18cm", category: "Pisos", price: 125.00, images: ["images/pisosaotome37x18.jpeg"] },
            { id: 4, name: "Piso S√£o Tom√© Amarelo 37x18cm", category: "Pisos", price: 95.00, images: [""] },
            { id: 5, name: "Piso S√£o Tom√© Amarelo 30x30cm", category: "Pisos", price: 90.00, images: ["https://images.unsplash.com/photo-1504198266304-483652af8ad6?q=80&w=800"] },
            { id: 6, name: "Piso S√£o Tom√© Amarelo 47x18cm", category: "Pisos", price: 105.00, images: ["https://images.unsplash.com/photo-1551029170-136159518063?q=80&w=800"] },
            { id: 7, name: "Caco Branco Ar√©", category: "Pisos", price: 68.00, images: ["images/brancoare.jpg"] },
            { id: 8, name: "Caco S√£o Tom√© Amarelo", category: "Pisos", price: 55.00, images: ["https://images.unsplash.com/photo-1600585152220-90363fe7e115?q=80&w=800"] },

            // LAJINHAS
            { id: 9, name: "Lajinha Branco Marfim", category: "Lajinhas", price: 120.00, images: ["https://images.unsplash.com/photo-1590373435163-690180907e15?q=80&w=800"] },
            { id: 10, name: "Lajinha Amarelo Madeira", category: "Lajinhas", price: 88.00, images: ["https://images.unsplash.com/photo-1517315003714-a07399613842?q=80&w=800"] },
            { id: 11, name: "Lajinha Miracema", category: "Lajinhas", price: 65.00, images: ["https://images.unsplash.com/photo-1600585152220-90363fe7e115?q=80&w=800"] },

            // ROCKFACE
            { id: 16, name: "Rockface Bege Bahia", category: "Rockface", price: 210.00, images: ["https://images.unsplash.com/photo-1590373435163-690180907e15?q=80&w=800"] },
            { id: 17, name: "Travertino Anticatto", category: "Rockface", price: 250.00, images: ["https://images.unsplash.com/photo-1504198266304-483652af8ad6?q=80&w=800"] },

            // REVESTIMENTOS
            { id: 20, name: "Filete S√£o Tom√© Branco 3cm", category: "Revestimentos", price: 165.00, images: ["https://images.unsplash.com/photo-1541844053589-3462890b74cf?q=80&w=800"] },
            { id: 21, name: "Filete Pedra Ferro 5cm", category: "Revestimentos", price: 185.00, images: ["https://images.unsplash.com/photo-1600585152220-90363fe7e115?q=80&w=800"] },
            { id: 22, name: "Borda S√£o Tom√© Branca", category: "Revestimentos", price: 145.00, images: ["https://images.unsplash.com/photo-1517315003714-a07399613842?q=80&w=800"] }
        ];

        const GLOBAL_EXTRAS = [
            { id: 'ex1', name: 'Oleofugante (Prote√ß√£o)', price: 48.00 },
            { id: 'ex2', name: 'Argamassa AC3 Branca', price: 55.00 }
        ];

        let cart = [];
        let currentItem = null;
        let selectedExtras = new Set();

        function init() {
            renderProducts(CATALOG_ITEMS);
            document.getElementById('mainSearch').addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                renderProducts(CATALOG_ITEMS.filter(i => i.name.toLowerCase().includes(term)));
            });
            document.getElementById('qtyInput').addEventListener('change', (e) => {
                currentItem.qty = Math.max(0.5, parseFloat(e.target.value) || 0.5);
                updateModalTotal();
            });
        }

        function renderProducts(items) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = items.map(item => `
                <div onclick="openProduct(${item.id})" class="product-card bg-white rounded-[2rem] p-4 cursor-pointer">
                    <img src="${item.images[0]}" class="h-56 w-full object-cover rounded-[1.5rem] mb-4">
                    <h3 class="text-lg font-extrabold text-forest mb-1 leading-tight h-12 overflow-hidden">${item.name}</h3>
                    <p class="text-sm font-bold text-forest/40">R$ ${item.price.toFixed(2)}/m¬≤</p>
                </div>
            `).join('');
        }

        function filterCategory(cat, btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('category-active'));
            btn.classList.add('category-active');
            renderProducts(cat === 'all' ? CATALOG_ITEMS : CATALOG_ITEMS.filter(i => i.category === cat));
        }

        function openProduct(id) {
            const item = CATALOG_ITEMS.find(i => i.id === id);
            currentItem = { ...item, qty: 1.0 };
            selectedExtras.clear();
            document.getElementById('modalTitle').innerText = item.name;
            document.getElementById('modalPriceBase').innerText = `R$ ${item.price.toFixed(2)} / m¬≤`;
            document.getElementById('qtyInput').value = "1.0";
            
            document.getElementById('extrasContainer').innerHTML = GLOBAL_EXTRAS.map(ex => `
                <label class="flex items-center justify-between p-4 bg-sage rounded-2xl cursor-pointer border-2 border-transparent has-[:checked]:border-leaf transition-all">
                    <div class="flex items-center gap-3">
                        <input type="checkbox" class="hidden" onchange="toggleExtra('${ex.id}')">
                        <div class="w-5 h-5 rounded-full border-2 border-forest/20 flex items-center justify-center">
                            <div class="w-2.5 h-2.5 bg-leaf rounded-full opacity-0 transition-all check-indicator"></div>
                        </div>
                        <span class="text-xs font-bold text-forest">${ex.name}</span>
                    </div>
                    <span class="text-[10px] font-black opacity-40">R$ ${ex.price.toFixed(2)}</span>
                </label>
            `).join('');

            document.getElementById('modalSlider').innerHTML = `<img src="${item.images[0]}" class="h-full w-full object-cover">`;
            updateModalTotal();
            document.getElementById('productModal').classList.remove('hidden');
        }

        function toggleExtra(id) {
            if(selectedExtras.has(id)) selectedExtras.delete(id);
            else selectedExtras.add(id);
            updateModalTotal();
        }

        function updateQty(val) {
            currentItem.qty = Math.max(0.5, currentItem.qty + val);
            document.getElementById('qtyInput').value = currentItem.qty.toFixed(1);
            updateModalTotal();
        }

        function updateModalTotal() {
            let totalItem = currentItem.price * currentItem.qty;
            let totalExtras = 0;
            selectedExtras.forEach(id => totalExtras += GLOBAL_EXTRAS.find(e => e.id === id).price);
            const btn = document.getElementById('addToCartBtn');
            btn.innerText = `Adicionar ‚Ä¢ R$ ${(totalItem + totalExtras).toFixed(2)}`;
            btn.onclick = () => {
                const extrasArray = Array.from(selectedExtras).map(id => GLOBAL_EXTRAS.find(e => e.id === id));
                cart.push({...currentItem, qty: currentItem.qty, selectedExtras: extrasArray, finalPrice: (totalItem + totalExtras)});
                btn.classList.add('added-anim');
                setTimeout(() => { closeModal('productModal'); updateCartBar(); btn.classList.remove('added-anim'); }, 400);
            };
        }

        function updateCartBar() {
            const bar = document.getElementById('cartBar');
            if(cart.length) {
                bar.classList.replace('translate-y-32', 'translate-y-0');
                bar.classList.replace('opacity-0', 'opacity-100');
                document.getElementById('cartCount').innerText = `${cart.length} item(s) no carrinho`;
                document.getElementById('cartTotalText').innerText = `R$ ${cart.reduce((a, b) => a + b.finalPrice, 0).toFixed(2)}`;
            }
        }

        function openCheckout() {
            document.getElementById('checkoutItems').innerHTML = cart.map((i, idx) => `
                <div class="bg-sage p-4 rounded-2xl flex justify-between items-center">
                    <div>
                        <p class="text-xs font-black text-forest">${i.qty.toFixed(1)}m¬≤ - ${i.name}</p>
                        ${i.selectedExtras.map(ex => `<p class="text-[9px] text-leaf font-bold">+ ${ex.name}</p>`).join('')}
                    </div>
                    <button onclick="removeFromCart(${idx})" class="text-red-400"><i class="fa-solid fa-trash"></i></button>
                </div>`).join('');
            document.getElementById('finalTotalRes').innerText = `R$ ${cart.reduce((a, b) => a + b.finalPrice, 0).toFixed(2)}`;
            document.getElementById('checkoutModal').classList.remove('hidden');
        }

        function removeFromCart(idx) {
            cart.splice(idx, 1);
            if(!cart.length) { closeModal('checkoutModal'); document.getElementById('cartBar').classList.add('translate-y-32'); }
            else { openCheckout(); updateCartBar(); }
        }

        function sendWhatsApp() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            const addr = document.getElementById('custAddr').value;
            if(!name || !phone || !addr) return alert("Por favor, preencha todos os dados de entrega!");

            let msg = `*NOVO OR√áAMENTO - NATURAL PEDRAS*\n\n`;
            msg += `üë§ *Cliente:* ${name}\nüì± *Tel:* ${phone}\nüìç *Entrega:* ${addr}\n\n`;
            msg += `*ITENS DO PEDIDO:*\n`;
            cart.forEach(i => {
                msg += `‚úÖ ${i.qty.toFixed(1)}m¬≤ - ${i.name}\n`;
                i.selectedExtras.forEach(ex => msg += `   ‚îî + ${ex.name}\n`);
            });
            msg += `\n*TOTAL MATERIAIS: R$ ${cart.reduce((a, b) => a + b.finalPrice, 0).toFixed(2)}*`;
            window.open(`https://wa.me/5500000000000?text=${encodeURIComponent(msg)}`);
        }

        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }
        init();
    </script>
</body>
</html>
